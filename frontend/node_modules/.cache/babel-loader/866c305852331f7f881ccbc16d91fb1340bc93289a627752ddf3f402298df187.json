{"ast":null,"code":"// import React, { useState, useRef } from \"react\";\n\n// const channels = [\n//   { key: \"vocals\", label: \"üé§ Vocals\", color: \"from-blue-400 to-blue-600\" },\n//   { key: \"drums\", label: \"ü•Å Drums\", color: \"from-yellow-400 to-yellow-600\" },\n//   { key: \"bass\", label: \"üé∂ Bass\", color: \"from-green-400 to-green-600\" },\n//   { key: \"other\", label: \"üéß Other\", color: \"from-purple-400 to-purple-600\" },\n// ];\n\n// const fmt = (db) => (db > 0 ? `+${db}` : `${db}`) + \" dB\";\n\n// export default function Mixer({ onSave }) {\n//   const [file, setFile] = useState(null);\n//   const [gains, setGains] = useState(Object.fromEntries(channels.map((c) => [c.key, 0])));\n//   const [separating, setSeparating] = useState(false);\n//   const [progress, setProgress] = useState(0);\n//   const [playing, setPlaying] = useState(false);\n//   const [paused, setPaused] = useState(false);\n\n//   const audioRef = useRef(null);\n\n//   // ------------------------\n//   // Handle slider change\n//   // ------------------------\n//   const handleChange = (key, val) => setGains((prev) => ({ ...prev, [key]: parseInt(val) }));\n\n//   // ------------------------\n//   // Upload and trigger Demucs\n//   // ------------------------\n//   const handleUpload = async (e) => {\n//     const f = e.target.files[0];\n//     if (!f) return;\n//     setFile(f);\n//     setSeparating(true);\n//     setProgress(0);\n\n//     const formData = new FormData();\n//     formData.append(\"file\", f);\n\n//     try {\n//       const resp = await fetch(\"http://127.0.0.1:8000/start_separation\", {\n//         method: \"POST\",\n//         body: formData,\n//       });\n\n//       if (!resp.ok) throw new Error(\"Separation failed\");\n//       const data = await resp.json();\n\n//       if (data.status === \"completed\") {\n//         setProgress(100);\n//         setSeparating(false);\n//         alert(\"‚úÖ Separation complete!\");\n//       } else {\n//         throw new Error(\"Unexpected response\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Error starting separation\");\n//       setSeparating(false);\n//     }\n//   };\n\n//   // ------------------------\n//   // Play / Pause / Resume / Stop\n//   // ------------------------\n//   const playMix = async () => {\n//     try {\n//       const formData = new FormData();\n//       formData.append(\"vocals_gain\", gains.vocals);\n//       formData.append(\"drums_gain\", gains.drums);\n//       formData.append(\"bass_gain\", gains.bass);\n//       formData.append(\"other_gain\", gains.other);\n\n//       const resp = await fetch(\"http://127.0.0.1:8000/mix\", { method: \"POST\", body: formData });\n//       const data = await resp.json();\n\n//       const audio = new Audio(`http://127.0.0.1:8000${data.path}`);\n//       audioRef.current = audio;\n//       audio.play();\n//       setPlaying(true);\n//       setPaused(false);\n\n//       audio.onended = () => {\n//         setPlaying(false);\n//         setPaused(false);\n//       };\n//     } catch (err) {\n//       console.error(\"Mix playback error:\", err);\n//       alert(\"Error playing mix\");\n//     }\n//   };\n\n//   const pauseMix = () => {\n//     if (!audioRef.current) return;\n//     audioRef.current.pause();\n//     setPaused(true);\n//   };\n\n//   const resumeMix = () => {\n//     if (!audioRef.current) return;\n//     audioRef.current.play();\n//     setPaused(false);\n//   };\n\n//   const stopMix = () => {\n//     if (!audioRef.current) return;\n//     audioRef.current.pause();\n//     audioRef.current.currentTime = 0;\n//     setPlaying(false);\n//     setPaused(false);\n//   };\n\n//   // ------------------------\n//   // Save metadata\n//   // ------------------------\n//   const handleSave = () => {\n//     if (!file) return alert(\"Upload a file first\");\n//     const title = file.name.replace(/\\.[^/.]+$/, \"\");\n//     const details = channels.map((c) => `${c.label}: ${fmt(gains[c.key])}`).join(\"\\n\");\n//     onSave?.({ title, artist: \"Custom Mix\", details });\n//   };\n\n//   // ------------------------\n//   // Render UI\n//   // ------------------------\n//   return (\n//     <div className=\"relative bg-[#151931]/70 backdrop-blur-lg border border-[#2a2f4a] rounded-2xl p-6 shadow-lg\">\n//       <div className=\"absolute inset-0 bg-gradient-to-br from-[#243066]/20 to-[#0f1220]/10 pointer-events-none rounded-2xl\"></div>\n\n//       {/* Upload */}\n//       <div className=\"relative z-10 mb-6 flex flex-col sm:flex-row sm:items-center gap-3 w-full\">\n//         <label className=\"text-sm font-semibold text-gray-300\">\n//           üéß Choose Audio File:\n//         </label>\n//         <input\n//           type=\"file\"\n//           accept=\"audio/*\"\n//           onChange={handleUpload}\n//           className=\"text-sm bg-[#0e1226]/80 border border-[#2a2f4a] p-2 rounded-md text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-400 transition\"\n//         />\n//         {file && <p className=\"text-xs text-gray-400 truncate max-w-[200px]\">{file.name}</p>}\n//       </div>\n\n//       {/* Progress */}\n//       {separating && (\n//         <div className=\"w-full mb-6\">\n//           <div className=\"w-full bg-[#0a0d1c]/50 rounded-md h-2 overflow-hidden\">\n//             <div\n//               className=\"h-full bg-gradient-to-r from-blue-500 to-cyan-300 transition-all duration-500\"\n//               style={{ width: `${progress}%` }}\n//             ></div>\n//           </div>\n//           <p className=\"text-xs text-gray-400 text-center mt-2\">{progress}%</p>\n//         </div>\n//       )}\n\n//       {/* Sliders */}\n//       <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-6 justify-items-center\">\n//         {channels.map((ch) => (\n//           <div\n//             key={ch.key}\n//             className=\"flex flex-col items-center bg-[#0e1226]/60 px-4 py-5 rounded-xl border border-[#2a2f4a] w-[140px]\"\n//           >\n//             <span\n//               className={`text-center mb-3 bg-clip-text text-transparent bg-gradient-to-r ${ch.color} font-semibold`}\n//             >\n//               {ch.label}\n//             </span>\n\n//             {/* Slider */}\n//             <div className=\"relative h-[180px] flex items-center justify-center\">\n//               <input\n//                 type=\"range\"\n//                 min=\"-24\"\n//                 max=\"12\"\n//                 step=\"1\"\n//                 value={gains[ch.key]}\n//                 onChange={(e) => handleChange(ch.key, e.target.value)}\n//                 className=\"appearance-none h-[180px] w-[6px] bg-gray-700 rounded-full cursor-pointer\"\n//                 style={{\n//                   writingMode: \"bt-lr\",\n//                   WebkitAppearance: \"slider-vertical\",\n//                   appearance: \"slider-vertical\",\n//                 }}\n//               />\n//             </div>\n\n//             <p className=\"text-xs mt-3 text-gray-300 tracking-wide\">{fmt(gains[ch.key])}</p>\n//           </div>\n//         ))}\n//       </div>\n\n//       {/* Buttons */}\n//       <div className=\"flex justify-center gap-4 mt-6 flex-wrap\">\n//         {!playing && (\n//           <button\n//             onClick={playMix}\n//             className=\"px-5 py-2 bg-blue-500 hover:bg-blue-600 text-black font-semibold rounded-md\"\n//           >\n//             ‚ñ∂ Play Mix\n//           </button>\n//         )}\n//         {playing && !paused && (\n//           <button\n//             onClick={pauseMix}\n//             className=\"px-5 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-md\"\n//           >\n//             ‚è∏ Pause\n//           </button>\n//         )}\n//         {paused && (\n//           <button\n//             onClick={resumeMix}\n//             className=\"px-5 py-2 bg-green-400 hover:bg-green-500 text-black font-semibold rounded-md\"\n//           >\n//             ‚ñ∂ Resume\n//           </button>\n//         )}\n//         {playing && (\n//           <button\n//             onClick={stopMix}\n//             className=\"px-5 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-md\"\n//           >\n//             ‚èπ Stop\n//           </button>\n//         )}\n//         <button\n//           onClick={handleSave}\n//           className=\"px-5 py-2 bg-indigo-500 hover:bg-indigo-600 text-black font-semibold rounded-md\"\n//         >\n//           üíæ Save Mix\n//         </button>\n//       </div>\n//     </div>\n//   );\n// }\n\n//////////////DUMB ONE ////////////////////\n// import React, { useState, useRef } from \"react\";\n\n// const channels = [\n//   { key: \"vocals\", label: \"Vocals\" },\n//   { key: \"drums\", label: \"Drums\" },\n//   { key: \"bass\", label: \"Bass\" },\n//   { key: \"other\", label: \"Other\" },\n// ];\n\n// const fmt = (db) => (db > 0 ? `+${db}` : `${db}`) + \" dB\";\n\n// export default function Mixer({ onSave }) {\n//   const [gains, setGains] = useState(\n//     Object.fromEntries(channels.map((c) => [c.key, 0]))\n//   );\n//   const [file, setFile] = useState(null);\n//   const [separating, setSeparating] = useState(false);\n//   const [progress, setProgress] = useState(0);\n//   const [playing, setPlaying] = useState(false);\n//   const [paused, setPaused] = useState(false);\n\n//   const audioRef = useRef(null);\n\n//   const handleChange = (key, val) =>\n//     setGains((prev) => ({ ...prev, [key]: parseInt(val) }));\n\n//   // ------------------------\n//   // Upload file and run Demucs\n//   // ------------------------\n//   const handleUpload = async (e) => {\n//     const f = e.target.files[0];\n//     if (!f) return;\n//     setFile(f);\n//     setSeparating(true);\n//     setProgress(0);\n\n//     const formData = new FormData();\n//     formData.append(\"file\", f);\n//     formData.append(\"username\", \"demo\");\n\n//     try {\n//       const startRes = await fetch(\"http://127.0.0.1:8000/start_separation\", {\n//         method: \"POST\",\n//         body: formData,\n//       });\n//       const { session_id } = await startRes.json();\n\n//       const es = new EventSource(`http://127.0.0.1:8000/progress/${session_id}`);\n//       es.onmessage = (ev) => {\n//         const val = parseInt(ev.data);\n//         setProgress(val);\n//         if (val >= 100) {\n//           es.close();\n//           setSeparating(false);\n//           alert(\"Separation complete!\");\n//         }\n//       };\n//       es.onerror = () => {\n//         es.close();\n//         setSeparating(false);\n//       };\n//     } catch (err) {\n//       console.error(\"Upload error:\", err);\n//       setSeparating(false);\n//       alert(\"Error starting separation\");\n//     }\n//   };\n\n//   // ------------------------\n//   // Play mixed output\n//   // ------------------------\n//   const playMix = async () => {\n//     try {\n//       const formData = new FormData();\n//       formData.append(\"username\", \"demo\");\n//       formData.append(\"vocals_gain\", gains.vocals);\n//       formData.append(\"drums_gain\", gains.drums);\n//       formData.append(\"bass_gain\", gains.bass);\n//       formData.append(\"other_gain\", gains.other);\n\n//       const resp = await fetch(\"http://127.0.0.1:8000/mix\", {\n//         method: \"POST\",\n//         body: formData,\n//       });\n//       const data = await resp.json();\n//       const mixUrl = `http://127.0.0.1:8000${data.path}`;\n\n//       const audio = new Audio(mixUrl);\n//       audioRef.current = audio;\n//       audio.play();\n//       setPlaying(true);\n//       setPaused(false);\n\n//       audio.onended = () => {\n//         setPlaying(false);\n//         setPaused(false);\n//       };\n//     } catch (err) {\n//       console.error(\"Mix playback error:\", err);\n//       alert(\"Error mixing stems\");\n//     }\n//   };\n\n//   const pauseMix = () => {\n//     if (audioRef.current) {\n//       audioRef.current.pause();\n//       setPaused(true);\n//     }\n//   };\n\n//   const resumeMix = () => {\n//     if (audioRef.current) {\n//       audioRef.current.play();\n//       setPaused(false);\n//     }\n//   };\n\n//   const stopMix = () => {\n//     if (audioRef.current) {\n//       audioRef.current.pause();\n//       audioRef.current.currentTime = 0;\n//       setPlaying(false);\n//       setPaused(false);\n//     }\n//   };\n\n//   const handleSave = () => {\n//     if (!file) {\n//       alert(\"Please upload a file first.\");\n//       return;\n//     }\n//     const title = file.name.replace(/\\.[^/.]+$/, \"\");\n//     const details = channels\n//       .map((c) => `${c.label}: ${fmt(gains[c.key])}`)\n//       .join(\"\\n\");\n//     onSave?.({ title, artist: \"Custom Mix\", details });\n//   };\n\n//   return (\n//     <div className=\"bg-[#1b1d25] text-gray-100 p-6 rounded-lg shadow-md w-full max-w-4xl mx-auto\">\n//       <h2 className=\"text-lg font-semibold mb-4 text-center\">Audio Mixer</h2>\n\n//       {/* Upload */}\n//       <div className=\"flex flex-col sm:flex-row items-center gap-3 mb-4\">\n//         <input\n//           type=\"file\"\n//           accept=\"audio/*\"\n//           onChange={handleUpload}\n//           className=\"text-sm bg-[#2a2d3e] border border-gray-600 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400\"\n//         />\n//         {file && (\n//           <p className=\"text-xs text-gray-400 truncate\">{file.name}</p>\n//         )}\n//       </div>\n\n//       {/* Progress bar */}\n//       {separating && (\n//         <div className=\"w-full mb-6\">\n//           <div className=\"w-full bg-gray-700 rounded-md h-2 overflow-hidden\">\n//             <div\n//               className=\"h-full bg-blue-400 transition-all duration-300\"\n//               style={{ width: `${progress}%` }}\n//             ></div>\n//           </div>\n//           <p className=\"text-xs text-gray-400 mt-1 text-center\">\n//             Separating... {progress}%\n//           </p>\n//         </div>\n//       )}\n\n//       {/* Vertical Sliders */}\n//       <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-6 justify-items-center mb-6\">\n//         {channels.map((ch) => (\n//           <div\n//             key={ch.key}\n//             className=\"flex flex-col items-center bg-[#2a2d3e] px-3 py-4 rounded-md border border-gray-700\"\n//           >\n//             <span className=\"font-medium mb-2\">{ch.label}</span>\n//             <div className=\"relative flex items-center justify-center h-[220px]\">\n//               <input\n//                 type=\"range\"\n//                 min=\"-24\"\n//                 max=\"12\"\n//                 value={gains[ch.key]}\n//                 onChange={(e) => handleChange(ch.key, e.target.value)}\n//                 className=\"appearance-none w-[220px] h-[6px] bg-transparent rotate-[-90deg] cursor-pointer\"\n//               />\n//               <div className=\"absolute w-[6px] h-[200px] bg-gray-800 rounded-full border border-gray-600 overflow-hidden\">\n//                 <div\n//                   className=\"absolute bottom-0 left-0 w-full bg-blue-500 rounded-full transition-all duration-300\"\n//                   style={{\n//                     height: `${((parseInt(gains[ch.key]) + 24) / 36) * 100}%`,\n//                   }}\n//                 ></div>\n//               </div>\n//             </div>\n//             <p className=\"text-xs mt-2\">{fmt(gains[ch.key])}</p>\n//           </div>\n//         ))}\n//       </div>\n\n//       {/* Buttons */}\n//       <div className=\"flex flex-wrap justify-center gap-3\">\n//         {!playing && (\n//           <button\n//             onClick={playMix}\n//             className=\"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md\"\n//           >\n//             Play Mix\n//           </button>\n//         )}\n//         {playing && !paused && (\n//           <button\n//             onClick={pauseMix}\n//             className=\"px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-black rounded-md\"\n//           >\n//             Pause\n//           </button>\n//         )}\n//         {paused && (\n//           <button\n//             onClick={resumeMix}\n//             className=\"px-4 py-2 bg-green-400 hover:bg-green-500 text-black rounded-md\"\n//           >\n//             Resume\n//           </button>\n//         )}\n//         {playing && (\n//           <button\n//             onClick={stopMix}\n//             className=\"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md\"\n//           >\n//             Stop\n//           </button>\n//         )}\n//         <button\n//           onClick={handleSave}\n//           className=\"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md\"\n//         >\n//           Save Mix\n//         </button>\n//       </div>\n//     </div>\n//   );\n// }","map":{"version":3,"names":[],"sources":["/Users/sidharth./Downloads/codebase/human-audio-mixer/frontend/src/components/Mixer.js"],"sourcesContent":["// import React, { useState, useRef } from \"react\";\n\n// const channels = [\n//   { key: \"vocals\", label: \"üé§ Vocals\", color: \"from-blue-400 to-blue-600\" },\n//   { key: \"drums\", label: \"ü•Å Drums\", color: \"from-yellow-400 to-yellow-600\" },\n//   { key: \"bass\", label: \"üé∂ Bass\", color: \"from-green-400 to-green-600\" },\n//   { key: \"other\", label: \"üéß Other\", color: \"from-purple-400 to-purple-600\" },\n// ];\n\n// const fmt = (db) => (db > 0 ? `+${db}` : `${db}`) + \" dB\";\n\n// export default function Mixer({ onSave }) {\n//   const [file, setFile] = useState(null);\n//   const [gains, setGains] = useState(Object.fromEntries(channels.map((c) => [c.key, 0])));\n//   const [separating, setSeparating] = useState(false);\n//   const [progress, setProgress] = useState(0);\n//   const [playing, setPlaying] = useState(false);\n//   const [paused, setPaused] = useState(false);\n\n//   const audioRef = useRef(null);\n\n//   // ------------------------\n//   // Handle slider change\n//   // ------------------------\n//   const handleChange = (key, val) => setGains((prev) => ({ ...prev, [key]: parseInt(val) }));\n\n//   // ------------------------\n//   // Upload and trigger Demucs\n//   // ------------------------\n//   const handleUpload = async (e) => {\n//     const f = e.target.files[0];\n//     if (!f) return;\n//     setFile(f);\n//     setSeparating(true);\n//     setProgress(0);\n\n//     const formData = new FormData();\n//     formData.append(\"file\", f);\n\n//     try {\n//       const resp = await fetch(\"http://127.0.0.1:8000/start_separation\", {\n//         method: \"POST\",\n//         body: formData,\n//       });\n\n//       if (!resp.ok) throw new Error(\"Separation failed\");\n//       const data = await resp.json();\n\n//       if (data.status === \"completed\") {\n//         setProgress(100);\n//         setSeparating(false);\n//         alert(\"‚úÖ Separation complete!\");\n//       } else {\n//         throw new Error(\"Unexpected response\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Error starting separation\");\n//       setSeparating(false);\n//     }\n//   };\n\n//   // ------------------------\n//   // Play / Pause / Resume / Stop\n//   // ------------------------\n//   const playMix = async () => {\n//     try {\n//       const formData = new FormData();\n//       formData.append(\"vocals_gain\", gains.vocals);\n//       formData.append(\"drums_gain\", gains.drums);\n//       formData.append(\"bass_gain\", gains.bass);\n//       formData.append(\"other_gain\", gains.other);\n\n//       const resp = await fetch(\"http://127.0.0.1:8000/mix\", { method: \"POST\", body: formData });\n//       const data = await resp.json();\n\n//       const audio = new Audio(`http://127.0.0.1:8000${data.path}`);\n//       audioRef.current = audio;\n//       audio.play();\n//       setPlaying(true);\n//       setPaused(false);\n\n//       audio.onended = () => {\n//         setPlaying(false);\n//         setPaused(false);\n//       };\n//     } catch (err) {\n//       console.error(\"Mix playback error:\", err);\n//       alert(\"Error playing mix\");\n//     }\n//   };\n\n//   const pauseMix = () => {\n//     if (!audioRef.current) return;\n//     audioRef.current.pause();\n//     setPaused(true);\n//   };\n\n//   const resumeMix = () => {\n//     if (!audioRef.current) return;\n//     audioRef.current.play();\n//     setPaused(false);\n//   };\n\n//   const stopMix = () => {\n//     if (!audioRef.current) return;\n//     audioRef.current.pause();\n//     audioRef.current.currentTime = 0;\n//     setPlaying(false);\n//     setPaused(false);\n//   };\n\n//   // ------------------------\n//   // Save metadata\n//   // ------------------------\n//   const handleSave = () => {\n//     if (!file) return alert(\"Upload a file first\");\n//     const title = file.name.replace(/\\.[^/.]+$/, \"\");\n//     const details = channels.map((c) => `${c.label}: ${fmt(gains[c.key])}`).join(\"\\n\");\n//     onSave?.({ title, artist: \"Custom Mix\", details });\n//   };\n\n//   // ------------------------\n//   // Render UI\n//   // ------------------------\n//   return (\n//     <div className=\"relative bg-[#151931]/70 backdrop-blur-lg border border-[#2a2f4a] rounded-2xl p-6 shadow-lg\">\n//       <div className=\"absolute inset-0 bg-gradient-to-br from-[#243066]/20 to-[#0f1220]/10 pointer-events-none rounded-2xl\"></div>\n\n//       {/* Upload */}\n//       <div className=\"relative z-10 mb-6 flex flex-col sm:flex-row sm:items-center gap-3 w-full\">\n//         <label className=\"text-sm font-semibold text-gray-300\">\n//           üéß Choose Audio File:\n//         </label>\n//         <input\n//           type=\"file\"\n//           accept=\"audio/*\"\n//           onChange={handleUpload}\n//           className=\"text-sm bg-[#0e1226]/80 border border-[#2a2f4a] p-2 rounded-md text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-400 transition\"\n//         />\n//         {file && <p className=\"text-xs text-gray-400 truncate max-w-[200px]\">{file.name}</p>}\n//       </div>\n\n//       {/* Progress */}\n//       {separating && (\n//         <div className=\"w-full mb-6\">\n//           <div className=\"w-full bg-[#0a0d1c]/50 rounded-md h-2 overflow-hidden\">\n//             <div\n//               className=\"h-full bg-gradient-to-r from-blue-500 to-cyan-300 transition-all duration-500\"\n//               style={{ width: `${progress}%` }}\n//             ></div>\n//           </div>\n//           <p className=\"text-xs text-gray-400 text-center mt-2\">{progress}%</p>\n//         </div>\n//       )}\n\n//       {/* Sliders */}\n//       <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-6 justify-items-center\">\n//         {channels.map((ch) => (\n//           <div\n//             key={ch.key}\n//             className=\"flex flex-col items-center bg-[#0e1226]/60 px-4 py-5 rounded-xl border border-[#2a2f4a] w-[140px]\"\n//           >\n//             <span\n//               className={`text-center mb-3 bg-clip-text text-transparent bg-gradient-to-r ${ch.color} font-semibold`}\n//             >\n//               {ch.label}\n//             </span>\n\n//             {/* Slider */}\n//             <div className=\"relative h-[180px] flex items-center justify-center\">\n//               <input\n//                 type=\"range\"\n//                 min=\"-24\"\n//                 max=\"12\"\n//                 step=\"1\"\n//                 value={gains[ch.key]}\n//                 onChange={(e) => handleChange(ch.key, e.target.value)}\n//                 className=\"appearance-none h-[180px] w-[6px] bg-gray-700 rounded-full cursor-pointer\"\n//                 style={{\n//                   writingMode: \"bt-lr\",\n//                   WebkitAppearance: \"slider-vertical\",\n//                   appearance: \"slider-vertical\",\n//                 }}\n//               />\n//             </div>\n\n//             <p className=\"text-xs mt-3 text-gray-300 tracking-wide\">{fmt(gains[ch.key])}</p>\n//           </div>\n//         ))}\n//       </div>\n\n//       {/* Buttons */}\n//       <div className=\"flex justify-center gap-4 mt-6 flex-wrap\">\n//         {!playing && (\n//           <button\n//             onClick={playMix}\n//             className=\"px-5 py-2 bg-blue-500 hover:bg-blue-600 text-black font-semibold rounded-md\"\n//           >\n//             ‚ñ∂ Play Mix\n//           </button>\n//         )}\n//         {playing && !paused && (\n//           <button\n//             onClick={pauseMix}\n//             className=\"px-5 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-md\"\n//           >\n//             ‚è∏ Pause\n//           </button>\n//         )}\n//         {paused && (\n//           <button\n//             onClick={resumeMix}\n//             className=\"px-5 py-2 bg-green-400 hover:bg-green-500 text-black font-semibold rounded-md\"\n//           >\n//             ‚ñ∂ Resume\n//           </button>\n//         )}\n//         {playing && (\n//           <button\n//             onClick={stopMix}\n//             className=\"px-5 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-md\"\n//           >\n//             ‚èπ Stop\n//           </button>\n//         )}\n//         <button\n//           onClick={handleSave}\n//           className=\"px-5 py-2 bg-indigo-500 hover:bg-indigo-600 text-black font-semibold rounded-md\"\n//         >\n//           üíæ Save Mix\n//         </button>\n//       </div>\n//     </div>\n//   );\n// }\n\n\n//////////////DUMB ONE ////////////////////\n// import React, { useState, useRef } from \"react\";\n\n// const channels = [\n//   { key: \"vocals\", label: \"Vocals\" },\n//   { key: \"drums\", label: \"Drums\" },\n//   { key: \"bass\", label: \"Bass\" },\n//   { key: \"other\", label: \"Other\" },\n// ];\n\n// const fmt = (db) => (db > 0 ? `+${db}` : `${db}`) + \" dB\";\n\n// export default function Mixer({ onSave }) {\n//   const [gains, setGains] = useState(\n//     Object.fromEntries(channels.map((c) => [c.key, 0]))\n//   );\n//   const [file, setFile] = useState(null);\n//   const [separating, setSeparating] = useState(false);\n//   const [progress, setProgress] = useState(0);\n//   const [playing, setPlaying] = useState(false);\n//   const [paused, setPaused] = useState(false);\n\n//   const audioRef = useRef(null);\n\n//   const handleChange = (key, val) =>\n//     setGains((prev) => ({ ...prev, [key]: parseInt(val) }));\n\n//   // ------------------------\n//   // Upload file and run Demucs\n//   // ------------------------\n//   const handleUpload = async (e) => {\n//     const f = e.target.files[0];\n//     if (!f) return;\n//     setFile(f);\n//     setSeparating(true);\n//     setProgress(0);\n\n//     const formData = new FormData();\n//     formData.append(\"file\", f);\n//     formData.append(\"username\", \"demo\");\n\n//     try {\n//       const startRes = await fetch(\"http://127.0.0.1:8000/start_separation\", {\n//         method: \"POST\",\n//         body: formData,\n//       });\n//       const { session_id } = await startRes.json();\n\n//       const es = new EventSource(`http://127.0.0.1:8000/progress/${session_id}`);\n//       es.onmessage = (ev) => {\n//         const val = parseInt(ev.data);\n//         setProgress(val);\n//         if (val >= 100) {\n//           es.close();\n//           setSeparating(false);\n//           alert(\"Separation complete!\");\n//         }\n//       };\n//       es.onerror = () => {\n//         es.close();\n//         setSeparating(false);\n//       };\n//     } catch (err) {\n//       console.error(\"Upload error:\", err);\n//       setSeparating(false);\n//       alert(\"Error starting separation\");\n//     }\n//   };\n\n//   // ------------------------\n//   // Play mixed output\n//   // ------------------------\n//   const playMix = async () => {\n//     try {\n//       const formData = new FormData();\n//       formData.append(\"username\", \"demo\");\n//       formData.append(\"vocals_gain\", gains.vocals);\n//       formData.append(\"drums_gain\", gains.drums);\n//       formData.append(\"bass_gain\", gains.bass);\n//       formData.append(\"other_gain\", gains.other);\n\n//       const resp = await fetch(\"http://127.0.0.1:8000/mix\", {\n//         method: \"POST\",\n//         body: formData,\n//       });\n//       const data = await resp.json();\n//       const mixUrl = `http://127.0.0.1:8000${data.path}`;\n\n//       const audio = new Audio(mixUrl);\n//       audioRef.current = audio;\n//       audio.play();\n//       setPlaying(true);\n//       setPaused(false);\n\n//       audio.onended = () => {\n//         setPlaying(false);\n//         setPaused(false);\n//       };\n//     } catch (err) {\n//       console.error(\"Mix playback error:\", err);\n//       alert(\"Error mixing stems\");\n//     }\n//   };\n\n//   const pauseMix = () => {\n//     if (audioRef.current) {\n//       audioRef.current.pause();\n//       setPaused(true);\n//     }\n//   };\n\n//   const resumeMix = () => {\n//     if (audioRef.current) {\n//       audioRef.current.play();\n//       setPaused(false);\n//     }\n//   };\n\n//   const stopMix = () => {\n//     if (audioRef.current) {\n//       audioRef.current.pause();\n//       audioRef.current.currentTime = 0;\n//       setPlaying(false);\n//       setPaused(false);\n//     }\n//   };\n\n//   const handleSave = () => {\n//     if (!file) {\n//       alert(\"Please upload a file first.\");\n//       return;\n//     }\n//     const title = file.name.replace(/\\.[^/.]+$/, \"\");\n//     const details = channels\n//       .map((c) => `${c.label}: ${fmt(gains[c.key])}`)\n//       .join(\"\\n\");\n//     onSave?.({ title, artist: \"Custom Mix\", details });\n//   };\n\n//   return (\n//     <div className=\"bg-[#1b1d25] text-gray-100 p-6 rounded-lg shadow-md w-full max-w-4xl mx-auto\">\n//       <h2 className=\"text-lg font-semibold mb-4 text-center\">Audio Mixer</h2>\n\n//       {/* Upload */}\n//       <div className=\"flex flex-col sm:flex-row items-center gap-3 mb-4\">\n//         <input\n//           type=\"file\"\n//           accept=\"audio/*\"\n//           onChange={handleUpload}\n//           className=\"text-sm bg-[#2a2d3e] border border-gray-600 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400\"\n//         />\n//         {file && (\n//           <p className=\"text-xs text-gray-400 truncate\">{file.name}</p>\n//         )}\n//       </div>\n\n//       {/* Progress bar */}\n//       {separating && (\n//         <div className=\"w-full mb-6\">\n//           <div className=\"w-full bg-gray-700 rounded-md h-2 overflow-hidden\">\n//             <div\n//               className=\"h-full bg-blue-400 transition-all duration-300\"\n//               style={{ width: `${progress}%` }}\n//             ></div>\n//           </div>\n//           <p className=\"text-xs text-gray-400 mt-1 text-center\">\n//             Separating... {progress}%\n//           </p>\n//         </div>\n//       )}\n\n//       {/* Vertical Sliders */}\n//       <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-6 justify-items-center mb-6\">\n//         {channels.map((ch) => (\n//           <div\n//             key={ch.key}\n//             className=\"flex flex-col items-center bg-[#2a2d3e] px-3 py-4 rounded-md border border-gray-700\"\n//           >\n//             <span className=\"font-medium mb-2\">{ch.label}</span>\n//             <div className=\"relative flex items-center justify-center h-[220px]\">\n//               <input\n//                 type=\"range\"\n//                 min=\"-24\"\n//                 max=\"12\"\n//                 value={gains[ch.key]}\n//                 onChange={(e) => handleChange(ch.key, e.target.value)}\n//                 className=\"appearance-none w-[220px] h-[6px] bg-transparent rotate-[-90deg] cursor-pointer\"\n//               />\n//               <div className=\"absolute w-[6px] h-[200px] bg-gray-800 rounded-full border border-gray-600 overflow-hidden\">\n//                 <div\n//                   className=\"absolute bottom-0 left-0 w-full bg-blue-500 rounded-full transition-all duration-300\"\n//                   style={{\n//                     height: `${((parseInt(gains[ch.key]) + 24) / 36) * 100}%`,\n//                   }}\n//                 ></div>\n//               </div>\n//             </div>\n//             <p className=\"text-xs mt-2\">{fmt(gains[ch.key])}</p>\n//           </div>\n//         ))}\n//       </div>\n\n//       {/* Buttons */}\n//       <div className=\"flex flex-wrap justify-center gap-3\">\n//         {!playing && (\n//           <button\n//             onClick={playMix}\n//             className=\"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md\"\n//           >\n//             Play Mix\n//           </button>\n//         )}\n//         {playing && !paused && (\n//           <button\n//             onClick={pauseMix}\n//             className=\"px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-black rounded-md\"\n//           >\n//             Pause\n//           </button>\n//         )}\n//         {paused && (\n//           <button\n//             onClick={resumeMix}\n//             className=\"px-4 py-2 bg-green-400 hover:bg-green-500 text-black rounded-md\"\n//           >\n//             Resume\n//           </button>\n//         )}\n//         {playing && (\n//           <button\n//             onClick={stopMix}\n//             className=\"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md\"\n//           >\n//             Stop\n//           </button>\n//         )}\n//         <button\n//           onClick={handleSave}\n//           className=\"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md\"\n//         >\n//           Save Mix\n//         </button>\n//       </div>\n//     </div>\n//   );\n// }\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}